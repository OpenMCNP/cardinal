[Tests]
  [set_global_estimator]
    type = Exodiff
    input = estimator.i
    exodiff = estimator_out.e
    requirement = "The system shall correctly set the global tally estimator to the one used by the single local tally. "
                  "The gold file was generated by setting the global and local tally estimators to collision manually."
    required_objects = 'OpenMCCellAverageProblem'
  []
  [mismatched_estimator]
    type = RunException
    input = estimator.i
    cli_args = '--error Problem/global_tally_estimator=tracklength'
    expect_err = "The estimator used by the local tally 'Cell' does not match the estimator set in 'global_tally_estimator'!"
    requirement = "The system shall warn the user if there is a mismatch between the local and global estimators."
    required_objects = 'OpenMCCellAverageProblem'
  []
  [multiple_mismatched_estimator]
    type = RunException
    input = multi_estimator.i
    cli_args = '--error'
    expect_err = "The estimator used by the local tally 'Cell_2' does not match the estimator set in 'global_tally_estimator'!"
    requirement = "The system shall warn the user if there is a mismatch between the local and global estimators for multiple tallies."
    required_objects = 'OpenMCCellAverageProblem'
  []
  [multiple_tallies]
    type = Exodiff
    input = multi.i
    exodiff = multi_out.e
    requirement = "The system shall correctly apply and normalize two different local tallies with different scores. "
                  "The gold file was generated using an input that had a single tally with multiple scores."
    required_objects = 'OpenMCCellAverageProblem'
  []
  [duplicate_scores]
    type = RunException
    input = multi.i
    cli_args = 'Tallies/Cell_2/tally_score="flux kappa_fission"'
    expect_err = "You have added 2 tallies which score kappa-fission!"
    requirement = "The system shall error if the user provides multiple tallies with overlapping scores."
    required_objects = 'OpenMCCellAverageProblem'
  []
  [multiple_different_tallies]
    type = Exodiff
    input = multi_diff.i
    exodiff = multi_diff_out.e
    requirement = "The system shall allow calculations with multiple different tallies."
    required_objects = 'OpenMCCellAverageProblem'
  []
[]
